@use './string-helpers' as *;
@use 'sass:map';
@use 'sass:meta';

// ---------------------------------------------------------
// Check if nested map has a value by the keys
//
// Example: map-deep-check($nested-map, 'key-1', 'key-2')
// ---------------------------------------------------------
@function map-deep-check($map, $keys...) {
    @if meta.type-of($map) != 'map' {
        @error 'The argument $map: `#{$map}` is of incorrect type: `#{meta.type-of($map)}`. Type of `Map` is required!';
    }

    @each $key in $keys {
        @if not map.has-key($map, $key) {
            @return false;
        }

        $map: map.get($map, $key);
    }

    @return true;
}

// ---------------------------------------------------------
// Get a value from nested map by the keys
//
// Example: map-deep-get($dfr-spacing, 'xs', 'y')
// ---------------------------------------------------------
@function map-deep-get($map, $keys...) {
    @if meta.type-of($map) != 'map' {
        @error 'The argument $map: `#{$map}` is of incorrect type: `#{meta.type-of($map)}`. Type of `Map` is required!';
    }

    @each $key in $keys {
        $map: map.get($map, $key);
    }

    @return $map;
}

// ---------------------------------------------------------
// Get value from nested map using dot notation string
//
// Example: get('border.radius.xs')
// ---------------------------------------------------------
@function map-get-dot($key, $map) {
    $keys: str-explode($key, '.');

    @if not map-deep-check($map, $keys...) {
        @error 'The argument $map: `#{$map}` doesn\'t has some of the $keys: `#{$keys}`!';
    }

    @return map-deep-get($map, $keys...);
}
