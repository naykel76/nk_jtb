@use "../base/vars_base" as *;

// ----------------------------------------------------------------
// set text colour based on the background
// ----------------------------------------------------------------

@function setTextColor($color) {
    $color-brightness: round((red($color) * 299) + (green($color) * 587) + calc((blue($color) * 114) / 1000));
    $light-color: round((red(#ffffff) * 299) + (green(#ffffff) * 587) + calc((blue(#ffffff) * 114) / 1000));
    // if background is dark, then the text color should be light
    @if abs($color-brightness) < calc($light-color / 2) {
        //  if the base $text is already light, then use it.
        @if (lightness($text) > 55) {
            @return $text;
        } @else {
            @return hsl(0, 0%, 100%);
        }
    } @else {
        //  if the $text is light, then set it dark
        @if (lightness($text) > 55) {
            @return #333;
        } @else {
            @return $text;
        }
    }
}

// ----------------------------------------------------------------
// Set transparent border color based on the background color.
// ----------------------------------------------------------------
// this is not a perfect solution because sometimes a dark color can
// have a low lightness, and visa-versa, but it is good enough.
//

@function setBorderShadeColor($color, $opacity: 0.15) {
    $lightness: lightness($color);
    @if ($lightness > 50) {
        @return rgba(0, 0, 0, $opacity); // Black
    } @else {
        @return rgba(255, 255, 255, $opacity); // White
    }
}

// --------------------------------------------------------------
// -- CONVERT COLOR TO RGBA --
// --------------------------------------------------------------
// will convert when passing in rgb, hex or hsl
//
// manually set a colour to convert
// background-color: convertToRgba(#e23465);
//
// optionally set the opacity
// background-color: convertToRgba(#e23465, 0.5);
//
// fetch a color from the color-map
// background-color: convertToRgba(map-get($color-map, 'blue'));

@function convertToRgba($color, $alpha: 1) {
    @return rgba(red($color), green($color), blue($color), $alpha);
}
