/* stylelint-disable selector-type-no-unknown */
@use '../common-tools.scss' as *;
@use '../mixins/backgrounds' as *;
@use '../mixins/make-classes-old' as *;
@use '../mixins/make-classes' as *;
@use '../mixins/make-classes' as *;
@use '../maps_and_variables/colors' as *;
@use 'sass:map';

$question-color: #c40c9a !default;

// ============================================================================
// -- Layouts --
// ============================================================================

.nk-docs {
    background-color: var(--bg-body);
    display: flex;

    // min-height: 100vh;

    :is(.left-sidebar, .right-sidebar) {
        background-color: var(--bg-surface);
        padding: $base-padding;
        width: 16rem;
    }

    .left-sidebar {
        border-right: 1px solid var(--border-color);
        height: 100vh;
        left: 0;
        overflow-y: auto;
        position: sticky;
        top: 0;
    }

    .right-sidebar {
        border-left: 1px solid var(--border-color);
    }

    .toc {
        font-size: 0.875rem;
        position: sticky;
        top: 1rem;

        a {
            // color: rgb(245 245 245);
        }
    }
}

// .docs-layout {
//     background-color: var(--bg-body);
//     display: grid;
//     min-height: 100vh;

//     .left-sidebar {
//         background-color: var(--bg-surface);
//         color: rgb(245 245 245);
//         padding: $base-padding;
//     }

//     .toc {
//         background-color: map.get($oklch-colors, 'slate-700');
//         color: rgb(245 245 245);
//         font-size: 0.75rem;

//         // max-height: 100vh;
//         // overflow-y: auto;
//         padding: $base-padding;
//         position: sticky;
//         top: 0;

//         a {
//             color: rgb(245 245 245);
//         }
//     }

//     // the container queries are used for the resizable container demo
//     @include cq-from-sm {
//         grid-template-columns: 250px 1fr 200px;
//     }

//     @include from-md {
//         grid-template-columns: 250px 1fr 200px;
//     }
// }

// :root {
//     --question-color: #c40c9a;
// }

:is(h1, h2, h3, h4, h5, h6, question) {
    code {
        font-size: inherit;
    }
}

[class^='example'] {
    border: 2px solid;
    border-radius: 0.5rem;
    padding: 1rem;
}

.example {
    &-jtb {
        background: repeating-linear-gradient(
            135deg,
            rgb(252 231 243 / 20%),
            rgb(252 231 243 / 20%) 20px,
            rgb(249 168 212 / 20%) 20px,
            rgb(249 168 212 / 20%) 40px
        );
        border-color: map.get($base-colors, 'pink');
        border-width: 3px;
    }

    &-utils {
        background: repeating-linear-gradient(
            135deg,
            rgb(219 234 254 / 20%),
            rgb(219 234 254 / 20%) 20px,
            rgb(147 197 253 / 20%) 20px,
            rgb(147 197 253 / 20%) 40px
        );
        border-color: map.get($base-colors, 'blue');
        border-width: 3px;

        // @include bg-stripes('blue', 5px);
    }
}

// used for svg icon backgrounds in docs
.svg-icon {
    &-pink {
        border: 1px solid map.get($base-colors, 'pink');

        @include bg-stripes('pink');
    }

    &-blue {
        border: 1px solid map.get($base-colors, 'blue');

        @include bg-stripes('blue');
    }
}

// ============================================================================
// -- Custom Selectors --
// ============================================================================
// special styling for <question> elements in docs
question {
    color: var(--text-question-color, $question-color);
    display: block;
    font-size: 1.15rem;
    font-style: italic;
    font-weight: 700;
    margin-block-start: $base-gap;
}

discuss {
    background-color: var(--purple-50);
    border: 3px dashed var(--purple-400);
    border-radius: 0.5rem;
    color: var(--purple-900);
    display: block;
    font-size: 1.15rem;
    margin-block-start: $base-gap;
    padding: 1.25rem;
}

// Warm/Attention-grabbing:

// bg-amber-50 border-amber-400 - soft amber glow
// bg-orange-50 border-orange-400 - gentle orange highlight
// bg-yellow-50 border-yellow-400 - classic highlight yellow

// Cool/Professional:

// bg-blue-50 border-blue-400 - calm, trustworthy
// bg-sky-50 border-sky-400 - lighter, airier blue
// bg-cyan-50 border-cyan-300 - modern, fresh

// Bold/High contrast:

// bg-purple-50 border-purple-500 - distinctive
// bg-pink-50 border-pink-400 - energetic

// ============================================================================
// -- Torchlight Code Highlighting --
// ============================================================================

pre code.torchlight {
    display: block;
    min-width: max-content;

    // .line { padding-inline: 1rem; }

    .line-number,
    .summary-caret {
        margin-inline-end: 1rem;
    }
}

/* Focus behaviour */
.torchlight {
    &.has-focus-lines {
        .line:not(.line-focus) {
            filter: blur(0.095rem);
            opacity: 0.65;
            transition:
                filter 0.35s,
                opacity 0.35s;
        }

        &:hover .line:not(.line-focus) {
            filter: blur(0);
            opacity: 1;
        }
    }

    summary:focus {
        outline: none;
    }

    details {
        > summary {
            &::marker,
            &::-webkit-details-marker {
                display: none;
            }
        }

        .summary-caret::after {
            pointer-events: none;
        }

        .summary-caret-start::after {
            color: yellow;
            content: '+';
        }

        &[open] .summary-caret-start::after {
            content: '-';
        }

        .summary-caret-middle::after,
        .summary-caret-end::after,
        .summary-caret-empty::after {
            content: ' ';
        }

        .summary-hide-when-open {
            color: yellow !important;
        }

        &[open] .summary-hide-when-open {
            display: none;
        }

        &:not([open]) .summary-hide-when-open {
            display: initial;
        }
    }
}

// ============================================================================
// -- Container Queries --
// ============================================================================
.resizable-container {
    border: 2px dashed var(--gray-300);
    border-radius: 0.5rem;
    container-name: demo-container;
    container-type: inline-size;
    max-width: 100%;
    overflow: auto;
    padding: 1rem;
    position: relative;
    resize: horizontal;
    width: 100%;

    &::after {
        bottom: 0.1125;
        color: #667eea;
        content: '← Drag to resize →';
        font-size: 0.75rem;
        pointer-events: none;
        position: absolute;
        right: 0.5rem;
    }
}

// prettier-ignore
@include cq-make-on-breakpoint( ( visibility: hidden ), 'invisible', $responsive-variants );

// prettier-ignore
@include cq-make-on-breakpoint( ( visibility: visible ), 'visible', $responsive-variants );

// prettier-ignore
@include cq-make-from-breakpoint( ( visibility: hidden ), 'invisible', $responsive-variants );

// prettier-ignore
@include cq-make-from-breakpoint( ( visibility: visible ), 'visible', $responsive-variants );

// prettier-ignore
@include cq-make-to-breakpoint( ( visibility: hidden ), 'invisible', remove-from-list($responsive-variants, xxl) );

// prettier-ignore
@include cq-make-to-breakpoint( ( visibility: visible ), 'visible', remove-from-list($responsive-variants, xxl) );
