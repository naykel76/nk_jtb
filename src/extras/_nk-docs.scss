/* stylelint-disable selector-type-no-unknown */
@use '../common-tools.scss' as *;
@use '../mixins/backgrounds' as *;
@use '../mixins/make-classes' as *;
@use 'sass:map';

$question-color: #c40c9a !default;

:root {
    --question-color: #c40c9a;
}

:is(h1, h2, h3, h4, h5, h6, question) {
    code {
        font-size: inherit;
    }
}

[class^='example'] {
    border: 2px solid;
    border-radius: 0.5rem;
    padding: 1rem;
}

.example {
    &-jtb {
        border-color: map.get($base-colors, 'pink');
    }

    &-utils {
        border-color: map.get($base-colors, 'purple');
    }
}

// consider moving these to themes or backgrounds
.ph-pink {
    border: 1px solid map.get($base-colors, 'pink');

    @include bg-stripes('pink');
}

.ph-purple {
    border: 1px solid map.get($base-colors, 'purple');

    @include bg-stripes('purple');
}

// ============================================================================
// -- Custom Selectors --
// ============================================================================
question {
    color: var(--text-question-color, $question-color);
    display: block;
    font-size: 1.15rem;
    font-style: italic;
    font-weight: 700;
    margin-block-start: $base-gap;
}

// // Reduce margin between a <question> and the following paragraph.
// //
// // Example:
// // <p><question></question></p>
// // <p></p>
// p:has(question) + p {
//     margin-block-start: 0.5rem;
// }

// ============================================================================
// -- Torchlight --
// ============================================================================

/*
 Add some vertical padding and expand the width
 to fill its container. The horizontal padding
 comes at the line level so that background
 colors extend edge to edge.
*/
pre code.torchlight {
    display: block;
    min-width: max-content;
    padding-block: 1rem;
}

/*
 Horizontal line padding to match the vertical
 padding from the code block above.
*/
pre code.torchlight .line {
    padding-inline: 1rem;
}

/*
 Push the code away from the line numbers and
 summary caret indicators.
*/
pre code.torchlight .line-number,
pre code.torchlight .summary-caret {
    margin-inline-end: 1rem;
}

/*
  Blur and dim the lines that don't have the `.line-focus` class,
  but are within a code block that contains any focus lines.
*/
.torchlight.has-focus-lines .line:not(.line-focus) {
    filter: blur(.095rem);
    opacity: .65;
    transition: filter 0.35s, opacity 0.35s;
}
 
/*
  When the code block is hovered, bring all the lines into focus.
*/
.torchlight.has-focus-lines:hover .line:not(.line-focus) {
    filter: blur(0);
    opacity: 1;
}

.torchlight summary:focus {
    outline: none;
}
 
/* Hide the default markers, as we provide our own */
.torchlight details > summary::marker,
.torchlight details > summary::-webkit-details-marker {
    display: none;
}
 
.torchlight details .summary-caret::after {
    pointer-events: none;
}
 
/* Add spaces to keep everything aligned */
.torchlight .summary-caret-empty::after,
.torchlight details .summary-caret-middle::after,
.torchlight details .summary-caret-end::after {
    content: " ";
}
 
/* Show a minus sign when the block is open. */
.torchlight details[open] .summary-caret-start::after {
    content: "-";
}
 
/* And a plus sign when the block is closed. */
.torchlight details:not([open]) .summary-caret-start::after {
    content: "+";
}
 
/* Hide the [...] indicator when open. */
.torchlight details[open] .summary-hide-when-open {
    display: none;
}
 
/* Show the [...] indicator when closed. */
.torchlight details:not([open]) .summary-hide-when-open {
    display: initial;
}

// ============================================================================
// -- Container Queries --
// ============================================================================
.resizable-container {
    border: 2px dashed #667eea;
    border-radius: 0.5rem;
    container-name: demo-container;
    container-type: inline-size;
    max-width: 100%;
    overflow: auto;
    padding: 1rem;
    position: relative;
    resize: horizontal;
    width: 100%;

    // &::after {
    //     bottom: 0.1125;
    //     color: #667eea;
    //     content: '← Drag to resize →';
    //     font-size: 0.75rem;
    //     pointer-events: none;
    //     position: absolute;
    //     right: 0.5rem;
    // }
}
