@use 'sass:list';
@use 'sass:map';
@use '../mixins/media-container-queries' as *;
@use '../mixins/magic-shared' as *;

// ============================================================================
// Grid Column Utilities
// ============================================================================
// Builds responsive grid-template-columns classes like:
//   .cols-3-2-1 â†’ 1fr 1fr 1fr at base, 2fr at sm, 3fr at md
// Each list must contain at least 2 values.
// ============================================================================
@mixin build-magic-grid($listsOfValues) {
    $identifier: 'cols';

    @each $list in $listsOfValues {
        @if $list != () {
            $bp-values: get-breakpoint-values($list);
            $num-breakpoints: list.length($list);
            $derived-class: derived-class($list, $identifier);

            .#{$derived-class} {
                grid-template-columns: repeat(map.get($bp-values, base), 1fr);

                @include from-sm {
                    grid-template-columns: repeat(map.get($bp-values, sm), 1fr);
                }

                @if $num-breakpoints >= 3 {
                    @include from-md {
                        grid-template-columns: repeat(map.get($bp-values, md), 1fr);
                    }
                }

                @if $num-breakpoints >= 4 {
                    @include from-lg {
                        grid-template-columns: repeat(map.get($bp-values, lg), 1fr);
                    }
                }

                @if $num-breakpoints >= 5 {
                    @include from-xl {
                        grid-template-columns: repeat(map.get($bp-values, xl), 1fr);
                    }
                }

                @if $num-breakpoints >= 6 {
                    @include from-xxl {
                        grid-template-columns: repeat(map.get($bp-values, xxl), 1fr);
                    }
                }
            }
        }
    }
}
