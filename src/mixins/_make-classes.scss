// stylelint-disable scss/at-else-closing-brace-newline-after
// stylelint-disable scss/at-else-closing-brace-space-after
// stylelint-disable scss/at-if-closing-brace-newline-after
// stylelint-disable scss/at-if-closing-brace-space-after
@use '../functions/classes' as *;
@use '../mixins/media-container-queries' as *;
@use '../mixins/make-properties' as *;
@use '../functions/strings' as *;
@use 'sass:map';
@use 'sass:list';
@use 'sass:meta';

// ============================================================================
// Layer 3: States only (no base, no responsive)
// Generates: .hover:block:hover { display: block; }
// ============================================================================
@mixin make-state-class($property, $class, $value, $states, $options: ()) {
    @each $state in $states {
        .#{$state}\:#{$class}:#{$state} {
            #{$property}: $value;
        }
    }
}

// ============================================================================
// Layer 4: Responsive + State (no base, no solo variants)
// Generates: .md:hover:block:hover { @media (min-width: 768px) { display: block; } }
// ============================================================================
@mixin make-responsive-state-class($property, $class, $value, $breakpoints, $states, $options: ()) {
    $child-selector: if(map.has-key($options, 'child-selector'), map.get($options, 'child-selector'), false);

    @each $bp in $breakpoints {
        @each $state in $states {
            $derived-class: #{$bp}\:#{$state}\:#{$class};

            #{build-selector($derived-class, $child-selector)} {
                @if $bp == 'sm' {
                    @include from-sm {
                        &:#{$state} {
                            #{$property}: $value;
                        }
                    }
                } @else if $bp == 'md' {
                    @include from-md {
                        &:#{$state} {
                            #{$property}: $value;
                        }
                    }
                } @else if $bp == 'lg' {
                    @include from-lg {
                        &:#{$state} {
                            #{$property}: $value;
                        }
                    }
                } @else if $bp == 'xl' {
                    @include from-xl {
                        &:#{$state} {
                            #{$property}: $value;
                        }
                    }
                } @else if $bp == 'xxl' {
                    @include from-xxl {
                        &:#{$state} {
                            #{$property}: $value;
                        }
                    }
                }
            }
        }
    }
}
