@use "../base/vars_all" as *;
@use "../functions/helpers" as *;
@use "../mixins/makeMagicClass" as *;
@use "../mixins/media" as *;
@use "../mixins/positionUtilityClasses" as *;

// ---------------- BEFORE YOU DO ANYTHING CRAZY ----------------
//
// Order Matters! basic and responsive utility classes need to
// come after the magic classes to allow them to be overridden
//
// There is no winning here!!! Do you want parent magic classes to
// override utilities or visa versa
//
// --------------------------------------------------------------


$spacing-utilities-map: (
    "margin": (
        "base-class": "m",
        "values-map":
            map-merge(
                $rem-sizes-map,
                (
                    "auto": auto,
                    "default": 1.25,
                )
            ),
        "xy-suffix": true,
        "axis-position-map": $axis-position-map,
    ),
    "padding": (
        "base-class": "p",
        "values-map":
            map-merge(
                $rem-sizes-map,
                (
                    "default": 1.25,
                )
            ),
        "xy-suffix": true,
        "axis-position-map": $axis-position-map,
    ),
);

// --------------------------------------------------------------
// -- MAGIC PADDING AND MARGINS --
// --------------------------------------------------------------

$magic-padding-x: ((), ());
$magic-padding-y: ((5, 3, 2, 2), ());

@include makeMagicClass(padding, $magic-padding-x, "px", $direction: x);
@include makeMagicClass(padding, $magic-padding-y, "py", $direction: y);

$magic-margin-x: ((), ());
$magic-margin-y: ((5, 3, 2, 2), ());
@include makeMagicClass(margin, $magic-margin-x, "mx", $direction: x);
@include makeMagicClass(margin, $magic-margin-y, "my", $direction: y);



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

//
.c-pxy > * {
    padding: 1rem;
}

.c-pxy-0 > * {
    padding: 0;
}

.c-px-0 > * {
    padding-left: 0;
    padding-right: 0;
}

.c-px-1 > * {
    padding-left: 1rem;
    padding-right: 1rem;
}

// py-5-3-2-2------------------------------------------------------
// -- RESPONSIVE MAGIC PADDING --
// --------------------------------------------------------------
//
.c-py-5-3-2 > * {
    padding-top: 2rem;
    padding-bottom: 2rem;

    @include from-md {
        padding-top: 3rem;
        padding-bottom: 3rem;
    }

    @include from-xl {
        padding-top: 5rem;
        padding-bottom: 5rem;
    }
}

// --------------------------------------------------------------
// -- CONTENT SPACING --
// --------------------------------------------------------------
//

$space-sizes: (0, 1, 1.5, 2, 3);

@each $size in $space-sizes {
    // wrap size in quotes to convert to string
    $class: "#{$size}";
    // search and escape decimals
    $class: strReplace($class, ".", "\\.");

    .space-x-#{$class} > *:not(:first-child) {
        margin-left: #{$size}rem;
    }

    .space-y-#{$class} > *:not(:first-child) {
        margin-top: #{$size}rem;
    }
}

// these do not play well in a loop!
.space-y {
    > *:not(:first-child) {
        margin-top: $content-gap;
    }
    &-025 > *:not(:first-child) {
        margin-top: 0.25rem;
    }
    &-05 > *:not(:first-child) {
        margin-top: 0.5rem;
    }
    &-075 > *:not(:first-child) {
        margin-top: 0.75rem;
    }
}

// these do not play well in a loop!
.space-x {
    > *:not(:first-child) {
        margin-left: 1rem;
    }
    &-025 > *:not(:first-child) {
        margin-left: 0.25rem;
    }
    &-05 > *:not(:first-child) {
        margin-left: 0.5rem;
    }
    &-075 > *:not(:first-child) {
        margin-left: 0.75rem;
    }
}

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

@include from-xl {
    .lg\:space-x > *:not(:first-child) {
        margin-left: 1rem;
    }
}

.space-mx > * + * {
    margin-left: 1rem;
    margin-right: 1rem;
}

.children-py-05 > * {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}
.children-py-025 > * {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
}

.children-px-1 > * {
    padding-left: 1rem;
    padding-right: 1rem;
}

//
//
//
// ORDER ABOVE IN REVIEW
//
//
//
//

// --------------------------------------------------------------
// -- POSITION BASED UTILITIES --
// --------------------------------------------------------------
// Must built last to ensure override
//

@include positionUtilityClasses($spacing-utilities-map);
